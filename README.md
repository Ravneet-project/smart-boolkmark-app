# SmartBookmark (Next.js + Supabase)

SmartBookmark is a minimal bookmark manager built with Next.js (App Router) and Supabase.
It supports Google OAuth login, adding bookmarks, searching, filtering by tags, and favorites (star).

## Tech Stack
- Next.js (App Router)
- React
- Supabase (Auth + Postgres + Row Level Security)
- Bootstrap 5 + Bootstrap Icons (UI)

## Features
- Google OAuth login/logout
- Add bookmark (optimistic UI, no full page reload)
- Delete bookmark (optimistic UI)
- Favorite / Unfavorite (single click to favorite, double click to remove)
- Filter by Tags (Collections)
- View filters: All / Recent / Favorites
- Search by title, url, tag
- Dark/Light theme toggle (UI)

## Requirements
- Node.js 18+
- A Supabase project (URL + Anon Key)
- Google OAuth enabled in Supabase

## Project Setup

### 1) Install dependencies
```bash
npm install
2) Create env file
Create .env.local in the project root:

NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
Restart the dev server after adding env values.

3) Supabase client file
Make sure your Supabase client is created in:
/lib/supabase.ts (or /lib/supabase.js)

Example:

import { createClient } from '@supabase/supabase-js'

export const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
)
Supabase Configuration
1) Enable Google OAuth
In Supabase:

Authentication -> Providers -> Google -> Enable

Add redirect URL(s)

For local development:

http://localhost:3000

If you are using OAuth redirect in code:

Ensure it matches exactly what you add in Supabase.

2) Create Database Table
Run this SQL in Supabase SQL Editor:

create table if not exists public.bookmarks (
  id bigint generated by default as identity primary key,
  title text not null,
  url text not null,
  tag text default 'General',
  user_id uuid not null references auth.users(id) on delete cascade,
  created_at timestamptz not null default now(),
  favorite boolean not null default false,
  pinned boolean not null default false,
  is_read boolean not null default true,
  archived boolean not null default false
);

create index if not exists bookmarks_user_id_idx on public.bookmarks (user_id);
create index if not exists bookmarks_created_at_idx on public.bookmarks (created_at desc);
create index if not exists bookmarks_favorite_idx on public.bookmarks (favorite);
Row Level Security (RLS)
1) Enable RLS
alter table public.bookmarks enable row level security;
2) Policies
Users should only access their own rows.

Select policy
create policy "select_own_bookmarks"
on public.bookmarks
for select
using (auth.uid() = user_id);
Insert policy
create policy "insert_own_bookmarks"
on public.bookmarks
for insert
with check (auth.uid() = user_id);
Update policy
create policy "update_own_bookmarks"
on public.bookmarks
for update
using (auth.uid() = user_id)
with check (auth.uid() = user_id);
Delete policy
create policy "delete_own_bookmarks"
on public.bookmarks
for delete
using (auth.uid() = user_id);
Running the Project
Development
npm run dev
Open:

smart-boolkmark-app-7n2l.vercel.app

Production
npm run build
npm run start
Notes
Favorites update and delete are optimistic (UI updates instantly).

If favorite update returns 0 rows updated, it usually indicates an RLS mismatch or wrong user_id/id condition.

If you want to use a different redirect URL, update both:

Supabase Google provider redirect URLs

redirectTo in signInWithOAuth

Folder Structure (Typical)
app/page.tsx (Main UI)

lib/supabase.ts (Supabase client)

app/globals.css (Optional global styles)

Troubleshooting
Login redirect issue
Confirm your redirect URL is allowed in Supabase.

Ensure your local app URL matches exactly.

Favorite update blocked
Confirm RLS policies exist for update.

Confirm rows have correct user_id saved.

Cannot read bookmarks
Confirm select policy exists.

Confirm you are logged in and bookmarks have correct user_id.

License
Private / Internal project use.





